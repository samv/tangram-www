%!PS-Adobe-2.0
%%Creator: dvips(k) 5.95a Copyright 2005 Radical Eye Software
%%Title: dbic-tangram.dvi
%%Pages: 9
%%PageOrder: Ascend
%%BoundingBox: 0 0 595 842
%%DocumentFonts: Palatino-Roman CMSY8 Palatino-Bold Courier CMSY6
%%+ Palatino-Italic CMSY10
%%DocumentPaperSizes: a4
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips -t a4 dbic-tangram
%DVIPSParameters: dpi=600
%DVIPSSource:  TeX output 2006.10.17:1319
%%BeginProcSet: tex.pro 0 0
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/CharBuilder{save 3 1 roll S A/base get 2 index get S
/BitMaps get S get/Cd X pop/ctr 0 N Cdx 0 Cx Cy Ch sub Cx Cw add Cy
setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx sub Cy .1 sub]{Ci}imagemask
restore}B/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc 0 0
% File 8r.enc  TeX Base 1 Encoding  Revision 2.0  2002-10-30
%
% @@psencodingfile@{
%   author    = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry,
%                W. Schmidt, P. Lehman",
%   version   = "2.0",
%   date      = "30 October 2002",
%   filename  = "8r.enc",
%   email     = "tex-fonts@@tug.org",
%   docstring = "This is the encoding vector for Type1 and TrueType
%                fonts to be used with TeX.  This file is part of the
%                PSNFSS bundle, version 9"
% @}
% 
% The idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard encoding, ISO Latin 1, Windows ANSI including the euro symbol,
% MacRoman, and some extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% These are /dotlessj /ff /ffi /ffl.
% 
% (4) hyphen appears twice for compatibility with both ASCII and Windows.
%
% (5) /Euro was assigned to 128, as in Windows ANSI
%
% (6) Missing characters from MacRoman encoding incorporated as follows:
%
%     PostScript      MacRoman        TeXBase1
%     --------------  --------------  --------------
%     /notequal       173             0x16
%     /infinity       176             0x17
%     /lessequal      178             0x18
%     /greaterequal   179             0x19
%     /partialdiff    182             0x1A
%     /summation      183             0x1B
%     /product        184             0x1C
%     /pi             185             0x1D
%     /integral       186             0x81
%     /Omega          189             0x8D
%     /radical        195             0x8E
%     /approxequal    197             0x8F
%     /Delta          198             0x9D
%     /lozenge        215             0x9E
%
/TeXBase1Encoding [
% 0x00
 /.notdef /dotaccent /fi /fl
 /fraction /hungarumlaut /Lslash /lslash
 /ogonek /ring /.notdef /breve
 /minus /.notdef /Zcaron /zcaron
% 0x10
 /caron /dotlessi /dotlessj /ff
 /ffi /ffl /notequal /infinity
 /lessequal /greaterequal /partialdiff /summation
 /product /pi /grave /quotesingle
% 0x20
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus
 /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three
 /four /five /six /seven
 /eight /nine /colon /semicolon
 /less /equal /greater /question
% 0x40
 /at /A /B /C
 /D /E /F /G
 /H /I /J /K
 /L /M /N /O
% 0x50
 /P /Q /R /S
 /T /U /V /W
 /X /Y /Z /bracketleft
 /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c
 /d /e /f /g
 /h /i /j /k
 /l /m /n /o
% 0x70
 /p /q /r /s
 /t /u /v /w
 /x /y /z /braceleft
 /bar /braceright /asciitilde /.notdef
% 0x80
 /Euro /integral /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /Omega /radical /approxequal
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /Delta /lozenge /Ydieresis
% 0xA0
 /.notdef /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot /hyphen /registered /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde
 /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def


%%EndProcSet
%%BeginProcSet: texps.pro 0 0
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]FontType 0
ne{/Metrics exch def dict begin Encoding{exch dup type/integertype ne{
pop pop 1 sub dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get
div def}ifelse}forall Metrics/Metrics currentdict end def}{{1 index type
/nametype eq{exit}if exch pop}loop}ifelse[2 index currentdict end
definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{dup
sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1 roll
mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def dup[
exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}if}
forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}def
end

%%EndProcSet
%%BeginFont: CMSY10
%!PS-AdobeFont-1.1: CMSY10 1.0
%%CreationDate: 1991 Aug 15 07:20:57
% Copyright (C) 1997 American Mathematical Society. All Rights Reserved.
11 dict begin
/FontInfo 7 dict dup begin
/version (1.0) readonly def
/Notice (Copyright (C) 1997 American Mathematical Society. All Rights Reserved) readonly def
/FullName (CMSY10) readonly def
/FamilyName (Computer Modern) readonly def
/Weight (Medium) readonly def
/ItalicAngle -14.035 def
/isFixedPitch false def
end readonly def
/FontName /CMSY10 def
/PaintType 0 def
/FontType 1 def
/FontMatrix [0.001 0 0 0.001 0 0] readonly def
/Encoding 256 array
0 1 255 {1 index exch /.notdef put} for
dup 15 /bullet put
readonly def
/FontBBox{-29 -960 1116 775}readonly def
currentdict end
currentfile eexec
D9D66F633B846A97B686A97E45A3D0AA052F09F9C8ADE9D907C058B87E9B6964
7D53359E51216774A4EAA1E2B58EC3176BD1184A633B951372B4198D4E8C5EF4
A213ACB58AA0A658908035BF2ED8531779838A960DFE2B27EA49C37156989C85
E21B3ABF72E39A89232CD9F4237FC80C9E64E8425AA3BEF7DED60B122A52922A
221A37D9A807DD01161779DDE7D31FF2B87F97C73D63EECDDA4C49501773468A
27D1663E0B62F461F6E40A5D6676D1D12B51E641C1D4E8E2771864FC104F8CBF
5B78EC1D88228725F1C453A678F58A7E1B7BD7CA700717D288EB8DA1F57C4F09
0ABF1D42C5DDD0C384C7E22F8F8047BE1D4C1CC8E33368FB1AC82B4E96146730
DE3302B2E6B819CB6AE455B1AF3187FFE8071AA57EF8A6616B9CB7941D44EC7A
71A7BB3DF755178D7D2E4BB69859EFA4BBC30BD6BB1531133FD4D9438FF99F09
4ECC068A324D75B5F696B8688EEB2F17E5ED34CCD6D047A4E3806D000C199D7C
515DB70A8D4F6146FE068DC1E5DE8BC5703711DA090312BA3FC00A08C453C609
C627A8BECD6E1FA14A3B02476E90AAD8B4700C400380BC9AFFBF7847EB28661B
9DC3AA0F44C533F2E07DCC4DE19D367BF223E33DC321D0247A0E6EF6ABC8FA52
15AE044094EF678A8726CD7C011F02BFF8AB6EAEEE391AD837120823BED0B5D8
F8B15245377871A64F78378BB4330149D6941F7A86FBFFC49B93C94155F5FA7D
F22E7214511C0A92693F4CDBF38411651540572F2DD70D924AE0F18E1CD581F3
C871399127FF5D07A868885B5FF7CDEB50B8323B2533DEF8DC973B1AE84FA0A2

0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
cleartomark
%%EndFont 
%%BeginFont: CMSY6
%!PS-AdobeFont-1.1: CMSY6 1.0
%%CreationDate: 1991 Aug 15 07:21:34
% Copyright (C) 1997 American Mathematical Society. All Rights Reserved.
11 dict begin
/FontInfo 7 dict dup begin
/version (1.0) readonly def
/Notice (Copyright (C) 1997 American Mathematical Society. All Rights Reserved) readonly def
/FullName (CMSY6) readonly def
/FamilyName (Computer Modern) readonly def
/Weight (Medium) readonly def
/ItalicAngle -14.035 def
/isFixedPitch false def
end readonly def
/FontName /CMSY6 def
/PaintType 0 def
/FontType 1 def
/FontMatrix [0.001 0 0 0.001 0 0] readonly def
/Encoding 256 array
0 1 255 {1 index exch /.notdef put} for
dup 3 /asteriskmath put
readonly def
/FontBBox{-4 -948 1329 786}readonly def
currentdict end
currentfile eexec
D9D66F633B846A97B686A97E45A3D0AA052F09F9C8ADE9D907C058B87E9B6964
7D53359E51216774A4EAA1E2B58EC3176BD1184A633B951372B4198D4E8C5EF4
A213ACB58AA0A658908035BF2ED8531779838A960DFE2B27EA49C37156989C85
E21B3ABF72E39A89232CD9F4237FC80C9E64E8425AA3BEF7DED60B122A52922A
221A37D9A807DD01161779DDE7D5FC1B2109839E5B52DFB7605D7BA557CC35D6
49F6EB651B83771034BA0C39DB8D426A24543EF4529E2D939125B5157482688E
9045C2242F4AFA4C489D975C029177CD6497EACD181FF151A45F521A4C4043C2
1F3E76EF5B3291A941583E27DFC68B9211105827590393ABFB8AA4D1623D1761
6AC0DF1D3154B0277BE821712BE7B33385E7A4105E8F3370F981B8FE9E3CF3E0
007B8C9F2D934F24D591C330487DDF179CECEC5258C47E4B32538F948AB00673
F9D549C971B0822056B339600FC1E3A5E51844CC8A75B857F15E7276260ED115
C5FD550F53CE5583743B50B0F9B7C4F836DEF7499F439A6EBE9BF559D2EE0571
CE54AEC463244B0F8EAB9E96CB18BD39259CC1FEC10F47FB56A38588CE634209
8F77258607212EE1DCA4F0667B152875B2CF5AC44B930B888ACD9D4B55662542
71239286D82E14CAABE7276AB199E2429C4C3BC32713106A10F5F16C8045A580
86EE21E7783B70FAE03D8D47B5AA13A881D478232DD65DBCD1EB9811C440E362
527EF73FC86FE664ACED80DCD6806CFD932BDEE102B89C22F423992249FC2273
F39C59AEF75B2088527AA973C71A6B134D26EF1ABAB75721971A0E4E52639DA9
2E1C3B2A6FB552CA834F6443E0628DD9CE69E92DA0B9B8ACAF3641FA0A7F1126
8DF8803E683ACCCCDE88C9F6C1838BCE7E8B56A0BC8C5F0300D81479A5087FFD
B8B66527B87F7977C31A54E0506C6D33EBC902841AB7B8D75BC8ADE5397905EF
BCB96AE4B57D308DCF0F74A93177F2DDF3486642A43834DB5B123CFA402E4BA1
6EB4C27AF21C96932E05B79CF951354FF66668C6503CA6FD2089A91A8D
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
cleartomark
%%EndFont 
%%BeginFont: CMSY8
%!PS-AdobeFont-1.1: CMSY8 1.0
%%CreationDate: 1991 Aug 15 07:22:10
% Copyright (C) 1997 American Mathematical Society. All Rights Reserved.
11 dict begin
/FontInfo 7 dict dup begin
/version (1.0) readonly def
/Notice (Copyright (C) 1997 American Mathematical Society. All Rights Reserved) readonly def
/FullName (CMSY8) readonly def
/FamilyName (Computer Modern) readonly def
/Weight (Medium) readonly def
/ItalicAngle -14.035 def
/isFixedPitch false def
end readonly def
/FontName /CMSY8 def
/PaintType 0 def
/FontType 1 def
/FontMatrix [0.001 0 0 0.001 0 0] readonly def
/Encoding 256 array
0 1 255 {1 index exch /.notdef put} for
dup 3 /asteriskmath put
readonly def
/FontBBox{-30 -955 1185 779}readonly def
currentdict end
currentfile eexec
D9D66F633B846A97B686A97E45A3D0AA052F09F9C8ADE9D907C058B87E9B6964
7D53359E51216774A4EAA1E2B58EC3176BD1184A633B951372B4198D4E8C5EF4
A213ACB58AA0A658908035BF2ED8531779838A960DFE2B27EA49C37156989C85
E21B3ABF72E39A89232CD9F4237FC80C9E64E8425AA3BEF7DED60B122A52922A
221A37D9A807DD01161779DDE7D5FC1B2109839E5B52DFBB2A7C1B5D8E7E8AA0
5B10EA43D6A8ED61AF5B23D49920D8F79DAB6A59062134D84AC0100187A6CD1F
80F5DDD9D222ACB1C23326A7656A635C4A241CCD32CBFDF8363206B8AA36E107
1477F5496111E055C7491002AFF272E46ECC46422F0380D093284870022523FB
DA1716CC4F2E2CCAD5F173FCBE6EDDB874AD255CD5E5C0F86214393FCB5F5C20
9C3C2BB5886E36FC3CCC21483C3AC193485A46E9D22BD7201894E4D45ADD9BF1
CC5CF6A5010B5654AC0BE0DA903DB563B13840BA3015F72E51E3BC80156388BA
F83C7D393392BCBC227771CDCB976E93302531886DDA73EBC9178917EFD0C20B
133F1E59AA9B568B69ECCFC0900517036FE3D4C09BBFD937BC5A9C0B89894A8F
63BCCA3746BA056D1B408B16E976D7BAA7D0F7693814ECF52D90BDB3398CF007
CAD14DF246B4D1886070D41A28110F88C9D3EB1F30B1823E0EAA1A35733AD321
E6338D62C26AB6FCD4BBB703248CD7C5CEE83E0167A63F89ACC9D09117C4D017
E773665CB7FA79D22231C8F858735B554E2ED612A436D299491FD31F810F202C
C865B87083F980C8DF6A3DD43D437617A69D3E58FFE85F106F7E7F6E50D4D25E
328F7A76B73078B3604C51CCDEAEFA74ADFB9A6C3A5A0EBDCFB578CCBC3553F8
44D4B2853DC7C8415AE3174A4C2209F4107C23000ECC343882C5E2ECA42D8B33
F4846EB85076770BD7E5AF795E1EEEFDC5F0229761DE6BA728FA78549D6E31AC
55ECFE0C64351DCC357F619E3771692B7DF8FFD7FAF48B4299C702F866374FDC
696E83BF09BDB1C40B
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
cleartomark
%%EndFont 
TeXDict begin 39139632 55387786 1000 600 600 (dbic-tangram.dvi)
@start /Fa 134[55 2[55 61 33 44 39 61 61 55 61 89 33
61 33 33 61 55 39 50 61 44 61 50 12[66 1[72 1[61 83 1[100
61 78 39 39 2[55 4[78 12[50 50 50 50 2[25 33 3[33 33
40[{TeXBase1Encoding ReEncodeFont}42 99.6264 /Palatino-Bold
rf /Fb 240[45 15[{}1 90.9091 /CMSY10 rf /Fc 119[55 10[55
55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55
55 55 55 55 55 55 55 55 55 55 1[55 1[55 55 55 2[55 55
55 55 55 55 55 1[55 55 55 55 55 55 1[55 55 55 55 55 55
55 55 55 55 55 55 55 55 55 55 3[55 1[55 1[55 55 55 55
55 55 55 1[55 55 55 1[55 1[55 55 35[{TeXBase1Encoding ReEncodeFont}78
90.9091 /Courier rf /Fd 133[40 45 45 1[45 51 30 35 35
1[45 40 51 71 25 40 25 25 45 45 25 35 45 37 42 40 12[56
51 61 71 56 71 1[86 51 2[30 3[56 71 61 56 66 6[23 3[45
3[45 45 3[30 42[48 2[{TeXBase1Encoding ReEncodeFont}44
90.9091 /Palatino-Italic rf /Fe 134[42 1[62 2[24 32 4[43
1[22 6[36 46 2[37 6[50 5[46 5[62 4[25 5[53 22[19 2[25
25 40[{TeXBase1Encoding ReEncodeFont}17 74.7198 /Palatino-Roman
rf /Ff 133[45 45 2[45 1[45 45 2[45 1[45 45 45 2[45 45
2[45 1[45 1[45 32[45 5[45 10[45 45 46[{TeXBase1Encoding ReEncodeFont}18
74.7198 /Courier rf /Fg 252[32 3[{}1 49.8132 /CMSY6 rf
/Fh 105[45 1[45 45 24[45 51 47 76 51 55 30 39 36 51 55
50 53 80 26 51 21 26 53 51 30 44 56 40 50 45 25 2[30
1[30 1[61 61 91 66 71 56 48 61 71 55 71 76 86 56 66 30
31 76 1[51 1[70 64 56 71 1[40 3[23 23 45 45 45 45 45
45 45 45 45 1[55 23 30 23 2[30 30 25 35[55 55 2[{
TeXBase1Encoding ReEncodeFont}76 90.9091 /Palatino-Roman
rf /Fi 134[51 45 2[56 30 40 35 1[56 51 56 1[30 2[30 56
51 1[45 56 40 1[45 14[66 76 3[91 3[35 3[56 1[66 61 8[45
45 1[45 45 45 45 45 45 49[{TeXBase1Encoding ReEncodeFont}32
90.9091 /Palatino-Bold rf /Fj 134[66 60 2[73 40 53 47
1[73 66 73 1[40 2[40 73 66 47 60 73 53 1[60 14[86 100
3[120 3[47 3[73 1[86 80 12[60 60 60 60 60 49[{
TeXBase1Encoding ReEncodeFont}30 119.552 /Palatino-Bold
rf /Fk 107[42 42 25[46 43 69 47 50 27 35 33 46 50 45
48 73 24 46 19 24 48 46 28 40 51 37 46 42 11[65 51 44
55 1[50 2[79 51 7[64 59 51 6[21 1[42 42 42 42 42 42 42
42 42 42 1[21 28 21 41[50 2[{TeXBase1Encoding ReEncodeFont}52
83.022 /Palatino-Roman rf /Fl 135[50 4[50 50 3[50 50
50 4[50 5[50 12[50 10[50 4[50 50 50 7[50 58[{
TeXBase1Encoding ReEncodeFont}14 83.022 /Courier rf /Fm
139[28 37 32 14[37 51 42 31[65 65[{TeXBase1Encoding ReEncodeFont}7
83.022 /Palatino-Bold rf /Fn 252[35 3[{}1 66.4176 /CMSY8
rf /Fo 139[32 1[39 2[54 58 88 29 2[29 3[48 1[44 55 50
10[72 2[52 3[78 23[50 50 3[50 50 50 3[25 44[{
TeXBase1Encoding ReEncodeFont}20 99.6264 /Palatino-Roman
rf /Fp 137[81 1[47 61 57 2[78 2[42 6[69 2[79 72 13[75
5[136 8[111 4[64 4[36 58[{TeXBase1Encoding ReEncodeFont}14
143.462 /Palatino-Roman rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%BeginPaperSize: a4
a4
%%EndPaperSize
 end
%%EndSetup
%%Page: 1 1
TeXDict begin 1 0 bop 1025 606 a Fp(Database:)43 b(Slave)35
b(or)h(Master?)1642 858 y Fo(Sam)25 b(V)-5 b(ilain)2119
822 y Fn(\003)1518 1062 y Fo(October)26 b(17,)f(2006)1721
1497 y Fm(Abstract)502 1655 y Fl(Tangram)f Fk(is)i(built)g(on)h(the)f
(pr)o(emise)f(that)g(any)h(object)g(model,)h(or)f(schema,)h(written)f
(in)377 1755 y(terms)i(of)f(its)h(meta-model)f(may)g(be)h(successfully)
f(mapped)g(to)h(a)f(set)g(of)g(database)f(tables.)377
1854 y Fl(DBIx::Class)19 b Fk(is)j(built)g(on)f(the)h(pr)o(emise)e
(that)i(it)f(is)h(possible)g(to)f(map)g(fr)o(om)g(any)g(database)377
1954 y(schema,)g(or)g(DDL,)f(to)i(a)e(set)h(of)f(Perl)h(classes,)f
(using)i(an)f(implicit)g(meta-model.)502 2054 y(This)i(paper)e(explor)o
(es)h(the)h(isomorphism)h(between)f(these)f(two)h(types)g(of)g
(database)d(ab-)377 2153 y(straction,)h(traditionally)g(consider)o(ed)e
(to)i(r)o(epr)o(esent)e(an)i(\223impedance)e(mismatch\224)i(that)g(can)
377 2253 y(not)f(be)f(over)o(come.)24 b(Using)c(the)f(semantics)h(of)f
(Perl)g(6,)g(Class)g(identity)g(is)h(r)o(elated)d(to)j(primary)377
2353 y(keys)25 b(as)f(attributes)g(ar)o(e)e(r)o(elated)h(to)h(columns;)
j(compiled)e(classes)f(ar)o(e)f(r)o(elated)f(to)j(tables)f(as)377
2452 y(instances)g(to)g(r)o(ows;)h(parametric)d(collection)j(r)o(oles)e
(r)o(elated)f(to)i(for)o(eign)g(key)f(and)h(link)g(table)377
2552 y(r)o(elationships;)c(\002nally)f(Perl)g(expr)o(essions)f(ar)o(e)g
(r)o(elated)f(to)i(RDBMS)f(query)h(expr)o(essions)g(and)377
2651 y(iterations)i(over)g(expr)o(essions)g(r)o(elated)e(to)i
(executing)g(RDBMS)f(queries.)150 2950 y Fj(Contents)150
3161 y Fi(1)91 b(Introduction)2753 b(2)150 3365 y(2)91
b(Basic)24 b(Mapping)2654 b(3)286 3478 y Fh(2.1)96 b(Object)24
b(Identity)c(as)j(Primary)g(Key)73 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)165
b(3)286 3591 y(2.2)96 b(Attributes)21 b(as)i(columns)g(.)45
b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)165 b(5)286
3704 y(2.3)96 b(Inheritance)22 b(and)h(Roles)31 b(.)45
b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)165 b(5)150
3907 y Fi(3)91 b(Mapping)22 b(Relationships)2297 b(6)286
4020 y Fh(3.1)96 b(Many-to-One)23 b(as)g(\(Local\))g(For)n(eign)f(Key)
54 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)165 b(6)286 4133 y(3.2)96 b(Many-to-Many)23
b(as)g(Link)f(T)-8 b(able)85 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)165
b(6)286 4246 y(3.3)96 b(Relations)23 b(and)f(Parametric)i(Roles)60
b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)165 b(6)286 4359 y(3.4)96
b(One-to-Many)23 b(as)g(\(Remote\))e(For)n(eign)h(Key)32
b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)165 b(7)150 4563 y Fi(4)91 b(Query)23 b(Expressions)2499
b(8)286 4676 y Fh(4.1)96 b(Junctions)23 b(for)f(r)n(emote)g(objects)63
b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)165 b(8)286 4789
y(4.2)96 b(Logical)24 b(Operations)e(on)g(Junctions)g(ar)n(e)h(still)g
(Junctions)60 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
165 b(8)286 4902 y(4.3)96 b(Running)22 b(the)g(queries)g(-)h
(evaluating)g(the)f(Junctions)61 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)165 b(8)150 5105 y Fi(5)91
b(Conclusion)2803 b(9)286 5218 y Fh(Refer)n(ences)67
b(.)46 b(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)165 b(9)p 150 5281 1385 4 v 249 5335
a Fg(\003)284 5367 y Ff(sam.vilain@catalyst.net.nz)p
Fe(,)14 b(Catalyst)20 b(IT)e(\(New)h(Zealand\))g Ff
(http://catalyst.net.nz/)1858 5915 y Fh(1)p eop end
%%Page: 2 2
TeXDict begin 2 1 bop 150 241 a Fj(1)119 b(Introduction)150
452 y Fh(Whilst)35 b(the)f(DBI)h(may)g(be)g(an)h(excellent)e(pr)n
(ovider)h(of)g(database)g(driver)g(independence,)g(just)150
565 y(about)27 b(every)f(pr)n(ogrammer)g(who)h(starts)e(using)i(the)f
(DBI)g(ends)g(up)g(either)g(building)i(their)e(own)150
678 y(abstractions)c(to)f(its)g(interface,)h(or)f(using)h(somebody)d
(else's.)27 b(As)21 b(a)h(r)n(esult)f(ther)n(e)g(ar)n(e)h(a)g
(multitude)150 791 y(of)h(modules)e(in)i(this)g(space)f(with)g
(signi\002cant)h(overlap)g(in)g(functionality)-10 b(.)291
904 y(This)17 b(is)g(at)h(least)f(in)g(part)g(because)g(the)f(typical)i
(Perl)f(pr)n(ogram)g(is)g(written)g(using)f(such)h(paradigms)150
1017 y(as)h Fd(object-oriented)j(pr)n(ogramming)p Fh(,)h(whilst)17
b(the)g(language)h(of)g(the)f(database)h(is)g Fd(r)n(elational)i(logic)
p Fh(.)28 b(This)150 1130 y(leads)21 b(to)f(developers)f(writing)i
(abstractions)h(to)e(the)g(r)n(elational)j(logic)f(in)f(a)h(way)f(that)
g(suits)g(them,)150 1243 y(or)h(\002ts)g(their)g(appr)n(oach)h(for)f
(the)g(task)f(at)i(hand.)28 b(They)21 b(end)g(up)h(building)h
Fd(Object-Relational)j(Map-)150 1356 y(pers)e Fh(\(ORMs\).)291
1468 y(Mapping)e(can)h(happen)f(in)h(either)e(dir)n(ection;)h(fr)n(om)h
(a)g Fd(Database)h(De\002nition)f(Language)g Fh(\(DDL\))150
1581 y(to)17 b(Perl)g(classes,)g(or)g(fr)n(om)h(a)f(set)f(of)i(Perl)f
(classes)f(to)h(a)h(DDL.)f Fc(DBIx::Class::Sc)o(he)o(ma)o(::)o(Loa)o
(de)o(r)150 1694 y Fh(demonstrates)d(converting)j(fr)n(om)h(SQL)f(DDL)g
(to)g Fc(DBIx::Class)p Fh('s)12 b(implicit)19 b(meta-model,)f(wher)n
(eas)150 1807 y(using)f Fc(Tangram::Schem)o(a)11 b Fh(you)16
b(describe)h(Perl)g(classes)g(\(per)n(haps)f(fed)h(fr)n(om)g
Fc(Class::Tangram)150 1920 y Fh(descriptions\))k(so)h(that)g
Fc(Tangram)e Fh(may)j(map)g(them)f(to)g(a)h(database.)291
2033 y(In)e(either)f(case,)i(we)e(desir)n(e)h(to)f(follow)i(Don't)f
(Repeat)f(Y)-8 b(ourself)20 b(by)h(avoiding)h(specifying)f(the)150
2146 y(schema)33 b(twice;)k(once)32 b(to)g(the)f(database)i(and)f(a)h
(second)e(time)i(to)f(the)f(mapping)i(layer)-7 b(.)57
b(T)-8 b(radi-)150 2259 y(tionally)e(,)26 b(systems)c(that)j(translate)
f(fr)n(om)i(DDL)f(to)f(Perl)h(classes)f(ar)n(e)i(called)f
Fd(database)j(abstractions)150 2372 y Fh(and)21 b(those)f(that)h
(translate)h(fr)n(om)g(some)e(other)g(meta-model)i(to)e(DDL)i(ar)n(e)g
Fd(object)h(persistence)h(tools)p Fh(.)150 2485 y(However)-7
b(,)21 b(this)i(distinction)f(is)h(somewhat)e(arbitrary;)i(a)h(tool)e
(might)h(even)f(pr)n(ovide)g(both)g(dir)n(ec-)150 2598
y(tions)g(of)h(translation.)291 2710 y(Ther)n(e)i(ar)n(e)h(some)f(mor)n
(e)h(inter)n(esting)e(dif)n(fer)n(ences)i(between)e(database)h
(abstraction)i(and)e(ob-)150 2823 y(ject)e(persistence;)286
3036 y Fb(\017)46 b Fd(suitability)28 b(to)f(object)g(types)h
Fh(\226)e(is)g(the)e(tool)h(is)h(useful)f(for)h(all)h(object)f(types,)e
(or)h(mer)n(ely)g(those)377 3149 y(cr)n(eated)d(with)h(the)f(mapping)g
(layer)h(in)g(mind,)g(per)n(haps)e(using)h(a)i(common)e(base)h(class?)
286 3336 y Fb(\017)46 b Fd(suitability)35 b(to)e(database)i
(de\002nitions)f Fh(\226)f(can)g(any)f(database)g(schema)h(may)f(be)h
(mapped,)g(or)377 3449 y(mer)n(ely)23 b(those)e(conformant)h(with)h
(the)f(style)f(of)i(the)f(mapper?)291 3662 y(The)35 b(schism)g(between)
e(tools)h(that)h(focus)g(on)g(one)f(or)h(the)f(other)g(is)h(what)g(I)g
(am)h(trying)e(to)150 3775 y(help)e(eliminate,)j(by)d(charting)g(a)h
(map)f(fr)n(om)h(the)e(Perl)h(meta-model)g(to)f(some)h(r)n(epr)n
(esentation)150 3888 y(of)i(a)h(r)n(elational)h Fd(Data)g(De\002nition)
f(Language)g Fh(\(DDL\),)g(and)f(the)g(entir)n(e)g(variety)g(of)h(the)f
(DDL)g(to)150 4001 y(corr)n(esponding)19 b(Perl)j(6)g(meta-model)f
(components.)26 b(SQL)21 b(de\002nes)f(one)g(well-known)h(DDL,)h(but)
150 4114 y(others)f(ar)n(e)i(possible.)291 4226 y(While)f(it)h(may)f
(not)f(be)h(possible)f(to)g(cleanly)i(`r)n(ound)e(trip')h(a)h(schema)f
(fr)n(om)g(Perl)g(to)f(DDL)i(and)150 4339 y(back)g(again)h(without)e
(inserting)f(Perl)i(code)e(into)i(the)f(database,)g(the)g(r)n(everse)f
(should)h(always)h(be)150 4452 y(possible.)k(Hence,)21
b(going)h(fr)n(om)h(Perl)f(to)g(DDL,)g(back)h(to)f(Perl)g(and)h(back)g
(to)f(DDL)g(should)g(end)f(up)150 4565 y(with)i(the)e(same)i(DDL.)g
(I'll)g(call)i(this)d(a)h Fd(stable)i Fh(mapping.)291
4678 y(I'm)e(going)e(to)g(list)i(r)n(ecommendations)e(for)h(writing)g
(ORMs,)f(for)h(both)g(the)f(DDL-driven)i(and)150 4791
y(the)h(object)h(model)g(driven)g(camps.)35 b(For)25
b(the)f(DDL)h(driven)g(camp,)h(it)g(is)f(an)g(expr)n(ession)f(of)h
(some)150 4904 y(key)f(r)n(elational)i(concepts)d(in)i(object-oriented)
e(terms)h(which)i(you)d(can)j(use)e(as)h(a)g(guide)f(for)g(con-)150
5017 y(str)o(ucting)32 b(corr)n(esponding)f(Perl)i(classes.)59
b(For)33 b(the)f(object)h(model)g(driven)f(camp,)37 b(it)c(is)g(laying)
150 5130 y(down)18 b(how)g(you)f(need)g(to)h(pepper)f(your)h(classes)g
(so)f(that)i(they)e(can)i(be)g(automatically)h(converted)150
5243 y(to)i(corr)n(ectly)g(normalized)i(table)f(str)o(uctur)n(es.)291
5356 y(I'm)31 b(not)g(going)f(to)g(talk)h(about)g(everything)e(-)i
(views,)i(triggers,)e(r)o(ules,)h(stor)n(ed)d(pr)n(ocedur)n(es)150
5468 y(and)e(sequences)d(will)k(be)e(omitted.)39 b(They'r)n(e)25
b(important,)i(but)f(they)g(should)f(hopefully)h(\002t)g(logi-)150
5581 y(cally)e(into)e(the)g(pictur)n(e.)1858 5915 y(2)p
eop end
%%Page: 3 3
TeXDict begin 3 2 bop 150 241 a Fh(So)22 b(far)h(I)g(have)g
(identi\002ed)e(these)g(cor)n(e)i(principles)f(of)h(stable)g(mapping;)
286 454 y Fb(\017)46 b Fd(Object-ness)25 b Fh(as)f(a)f(basis)h(for)f
(set)f(theory)g(facts)h(\226)h(the)f(justi\002cation)g(for)g(mapping)h
(compiled)377 567 y(Classes)f(to)f(tables.)286 754 y
Fb(\017)46 b Fd(Simple)28 b(T)-8 b(ypes)28 b Fh(of)f(Class)g(and)g
(Role)f(attributes)g(ar)n(e)i(r)n(epr)n(esented)c(as)j(columns;)h
(which)g(can)377 867 y(be)33 b(mapped)f(onto)g(the)h(compiled)g(class')
g(table,)j(or)d(separate)f(tables)h(sharing)g(a)g(unique)377
980 y(primary)23 b(key)-10 b(.)286 1168 y Fb(\017)46
b Fd(Complex)24 b(T)-8 b(ypes)23 b Fh(of)f(Class)g(and)g(Role)g
(attributes)f(ar)n(e)i(r)n(epr)n(esented)c(as)j(\(local\))i(for)n(eign)
e(keys,)377 1281 y(being)h(equivalent)g(to)f(r)n(egular)g(columns.)286
1468 y Fb(\017)46 b Fd(Collection)21 b(Classes)g Fh(such)e(as)h(Sets,)e
(Arrays)h(and)g(Hashes)f(can)i(be)g(linked)f(to)f(a)i(common)g(base)377
1581 y(class)j(using)f Fd(Parametric)j(Roles)e Fh(and)g(hence)f(tr)n
(eated)f(alike.)286 1769 y Fb(\017)46 b Fd(Collection)30
b Fh(attributes)e(may)g(be)h(r)n(epr)n(esented)c(as)k(link)g(tables,)g
(for)n(eign)f(keys)f(in)i(either)e(di-)377 1882 y(r)n(ection)d(\226)g
(depending)e(on)h(the)g(type)f(type)g(of)i(the)f(collection,)h(and)g
(which)h(constraints)d(ar)n(e)377 1995 y(placed)h(on)f(the)g
(membership)g(of)h(the)f(collection.)286 2182 y Fb(\017)46
b Fd(Association)40 b(Classes)g Fh(ar)n(e)e(pr)n(omotions)f(of)h
(Collections)g(to)f(\002rst)h(class)g(schema)g(entities.)377
2295 y(These)f(can)j(either)d(extend)g(the)h(categories)f(of)h(the)g
(collection,)43 b(or)38 b(add)g(extra)g(pr)n(oper)n(-)377
2408 y(ties.)55 b(They)30 b(can)j(be)e(made)h(by)f(sub-classing)h
Fc(Collection)27 b Fh(classes)32 b(\(or)f(including)i(the)377
2521 y Fc(Collection)18 b Fh(r)n(ole\).)286 2709 y Fb(\017)46
b Fd(Query)25 b(Expr)n(essions)i Fh(may)e(be)f(built)h(in)g(terms)f(of)
g(r)n(elationships)g(between)e Fd(junctions)j Fh(r)n(epr)n(e-)377
2822 y(senting)d(database-side)g(objects.)150 3120 y
Fj(2)119 b(Basic)30 b(Mapping)150 3331 y Fh(This)22 b(section)g
(describes)g(some)f(basic)j(principles)f(of)f(mapping)h(data)g(types.)
150 3586 y Fa(2.1)99 b(Object)25 b(Identity)g(as)g(Primary)g(Key)150
3763 y Fh(A)30 b(fr)n(equent)e(complaint)j(about)f(Object-Relational)h
(mappers)e(is)h(the)f(use)g(of)h Fd(Surr)n(ogate)i(IDs)e
Fh(on)150 3876 y(all)d(tables.)36 b(This)25 b(is)h(a)g(valid)h
(complaint;)g(after)f(all,)h(a)f(r)n(ow)f(in)h(a)g(table)g(is)f
(supposed)e(to)i(r)n(epr)n(esent)150 3989 y(a)33 b Fd(fact)p
Fh(:)47 b(an)33 b(association)f(between)f(some)g(data)h(points.)55
b(People)31 b(performing)g Fd(normalisation)k Fh(of)150
4102 y(database)23 b(schemas)f(ask)g(questions)f(of)i(tables)f(like,)h
(\223what)g(fact)g(does)e(this)h(r)n(ow)h(r)n(epr)n(esent?\224)291
4215 y(Our)32 b(basic)h(answer)e(is,)j(\223an)f(object)f(of)g(type)e(X)
i(exists)e(with)i(this)g(set)e(of)i(attributes\224.)55
b(This)150 4327 y(might)23 b(seem)g(like)h(skipping)e(the)h(question,)f
(but)h(I)h(think)f(a)h(better)e(way)i(of)f(looking)g(at)h(it)g(is)f
(\223Ask)150 4440 y(a)g(meta-question,)e(get)h(a)h(meta-answer)7
b(\224.)291 4553 y(That)26 b(is,)g(in)g(or)n(der)f(to)g(answer)g(the)g
(question)f(appr)n(opriately)h(in)h(a)h(manner)e(that)h(won't)f(ring)
150 4666 y(normalisation)g(alarm)i(bells,)e(you)f(must)g(\002ll)h(in)g
(the)f(gaps)g(in)h(the)f(answer)g(for)h(individual)h(types)150
4779 y(in)34 b(your)e(object)i(schema.)60 b(Such)33 b(as)h(\223ther)n
(e)f(exists)f(a)i(CD)g(with)f(this)g(unique)g(distributor)g(and)150
4892 y(catalogue)f(number)h(combination,)j(with)c(this)g(title,)j(and)d
(this)g(artist,)j(etc.\224)57 b(When)32 b(the)f(ORM)150
5005 y(must)e(stor)n(e)f(objects)g(that)h(pr)n(ovide)g(no)g(hint)g
(about)h(the)e(natur)n(e)h(of)g(their)g(identity)-10
b(,)30 b(it)f(must)g(use)150 5118 y(surr)n(ogate)21 b(IDs.)291
5231 y(It)28 b(turns)g(out)g(that)g(surr)n(ogate)f(identi\002ers)h(ar)n
(e)h(used)e(internally)i(by)g(the)f(database)g(anyway)-10
b(.)150 5344 y(It)30 b(is)h(usually)g(hidden,)g(and)g(often)f(called)h
(something)e(like)i Fc(rowid)p Fh(.)50 b(The)30 b Fc(rowid)e
Fh(is)j(typically)150 5457 y(not)26 b(r)n(equir)n(ed)g(for)h
Fd(index-or)n(ganized)k(tables)p Fh(.)42 b(By)26 b(analogy)-10
b(,)28 b(then,)e(it)h(is)g(not)f(a)i(fault)f(of)g(an)g(ORM)g(to)150
5570 y(add)k(surr)n(ogate)f(ID)h(column,)j(particularly)e(if)g(those)e
(surr)n(ogate)g(IDs)g(ar)n(e)i(also)g(hidden)e(\(ie,)j(ar)n(e)1858
5915 y(3)p eop end
%%Page: 4 4
TeXDict begin 4 3 bop 150 241 a Fh(not)27 b(needed)e(to)i(deal)g(with)g
(the)g(objects\).)42 b(If)27 b(they)g(ar)n(e)g(speci\002ed,)g(then)g(a)
h(primary)g(key)e(should)150 354 y(be)d(de\002ned.)291
467 y(Objects)e(should)f(corr)n(ectly)h(de\002ne)e(a)j
Fc(.WHICH)c Fh(method)i(\(a)h(Perl)g(6)h(convention\))e(that)h(r)n
(eturns)150 580 y(either)32 b(the)h(corr)n(ect)g(single)g(primary)h
(key)-10 b(,)34 b(or)f(something)f(that)h Fc(.does\(Seq\))c
Fh(in)34 b(the)e(case)i(of)150 693 y(multiple-part)22
b(primary)h(keys.)i(Additionally)-10 b(,)22 b(the)f(type)g(of)h(this)f
Fc(.WHICH)f Fh(r)n(eturn)h(value)i(should)150 806 y(be)k(declar)n(ed)g
(in)g(the)f(declaration)i(of)f(the)f Fc(.WHICH)e Fh(method)i(using)g
(the)g Fc(of)h Fh(keywor)n(d,)e(to)i(make)150 919 y(the)22
b(type)f(of)i(the)e(primary)i(key)f(available)j(in)e(the)f(meta-model.)
108 1131 y Fk(1)108 1244 y(2)136 b Fc(#)54 b(simple)e(example:)f(a)j
(phone)f(endpoint)d(uniquely)h(identified)f(by)108 1357
y Fk(3)136 b Fc(#)927 b(its)53 b(extension.)108 1470
y Fk(4)108 1583 y(5)136 b Fc(subset)52 b(Phone::Number)d(of)k(Str)h
(where)e(/\210\\d)2361 1599 y(**)2471 1583 y({0,4}$/;)108
1696 y Fk(6)108 1809 y(7)136 b Fc(class)53 b(Phone)f({)108
1922 y Fk(8)355 b Fc(has)53 b(Phone::Number)48 b($.extension;)108
2035 y Fk(9)355 b Fc(method)51 b(WHICH)i(of)g(Phone::Number)c({)67
2148 y Fk(10)572 b Fc($.extension;)67 2260 y Fk(11)354
b Fc(})67 2373 y Fk(12)135 b Fc(})67 2486 y Fk(13)67
2599 y(14)67 2712 y(15)g Fc(#)54 b(multi-part)c(key)k(example:)d(CDs)i
(identified)d(by)j(record)f(label)67 2825 y Fk(16)135
b Fc(#)1364 b(and)53 b(catalogue)d(number)67 2938 y Fk(17)67
3051 y(18)135 b Fc(class)53 b(CD)g({)67 3164 y Fk(19)354
b Fc(has)53 b(Label)f($.distributor;)67 3277 y Fk(20)354
b Fc(has)53 b(Label::CatNum)48 b($.catalogue_numb)o(er)o(;)67
3390 y Fk(21)67 3502 y(22)354 b Fc(method)51 b(WHICH)i(of)g(Seq[of)f
(=>)i(:\(Label,)d(Label::CatNum\))o(])67 3615 y Fk(23)354
b Fc({)67 3728 y Fk(24)572 b Fc(\($.distributor)o(,)48
b($.catalogue_numb)o(er)o(\);)67 3841 y Fk(25)354 b Fc(})67
3954 y Fk(26)135 b Fc(})291 4167 y Fh(Don't)30 b(make)g(the)f(code)g
(fragment)g(in)h(your)f Fc(.WHICH)e Fh(too)i(complicated;)34
b(the)29 b(ORM)h(might)150 4280 y(have)c(to)e(inspect)h(the)g(syntax)f
(tr)n(ee)h(of)g(the)f(code)h(to)g(\002gur)n(e)f(out)h(which)h(column)g
(r)n(efers)e(to)h(which)150 4392 y(attribute,)31 b(if)f(it)g(can't)g
(\002gur)n(e)f(it)h(out)f(in)h(any)g(other)e(way)-10
b(.)49 b(This)30 b(r)n(equir)n(ed)f(code)g(intr)n(ospection)f(I)150
4505 y(consider)n(ed)g(to)i(be)f(the)g(biggest)g(hack)h(of)g(this)g
(speci\002cation,)h(but)f(a)g(tolerable)g(one,)h(especially)150
4618 y(given)23 b(that)f Fc(.WHICH)e Fh(alr)n(eady)j(has)g(some)e(pr)n
(etty)g(hefty)h(r)n(estrictions.)291 4731 y(Instead)i(of)h(using)f(a)i
(surr)n(ogate)e(r)n(ow)h(ID,)f(you)h(could)g(use)f(the)g
Fd(entir)n(e)j(object)g Fh(as)e(the)f(`primary)150 4844
y(key')e(-)h(this)g(would)g(certainly)g(sit)g(better)f(with)g(Set)h
(Theory)-10 b(,)21 b(and)i(get)f(rid)h(of)g(that)g(`duplicate)g(r)n(ow)
150 4957 y(pr)n(oblem')g(that)f(drives)h(the)e(theorists)g(crazy)-10
b(.)291 5070 y(However)j(,)24 b(much)h(as)g(it)f(would)g(be)h
(unworkable)f(if)h(an)g(RDBMS)f(wer)n(e)g(to)g(r)n(equir)n(e)h(all)h
(tables)150 5183 y(without)34 b(primary)i(keys)d(to)i(have)h(an)f
(implicit)i(primary)f(over)f(all)h(of)g(its)f(columns,)j(de\002ning)150
5296 y Fc(.WHICH)17 b Fh(so)h(that)h(it)h(would)f(include)g(all)i(the)d
(pr)n(operties)g(of)h(the)g(object)g(would)f(have)i(unexpected)150
5409 y(side)j(ef)n(fects)h(for)g(most)g(people.)30 b(Y)-8
b(ou)23 b(would)h(ef)n(fectively)h(make)f(a)g Fd(value)i(type)f
Fh(or)f Fd(immutable)h(type)150 5522 y Fh(\(as)20 b(de\002ned)e(in)i
(Synopsis)e(12\),)j(and)f(ther)n(efor)n(e)e(the)h(r)n(esult)g(of)h
(changing)g(any)g(object)f(pr)n(operties)f(is)150 5634
y(unde\002ned.)26 b(Depending)20 b(on)i(the)g(VM)g(implementation,)g
(existing)f(variables)j(may)e(still)h(contain)1858 5915
y(4)p eop end
%%Page: 5 5
TeXDict begin 5 4 bop 150 241 a Fh(the)28 b(old)g(object,)i(or)e(ther)n
(e)f(might)i(be)f(other)g(confusing)g(side)g(ef)n(fects.)45
b(So,)29 b(much)g(as)g(Perl)f(6)h(will)150 354 y(assign)c(an)h
(arbitrary)g(value)h(for)e Fc(.WHICH)e Fh(by)j(default,)g(the)e(ORM)i
(must)f(attach)h(a)h(surr)n(ogate)d(ID)150 467 y(by)f(default,)f(too,)f
(if)j(it)e(wants)g(to)g(stor)n(e)g(such)g(objects.)150
722 y Fa(2.2)99 b(Attributes)25 b(as)g(columns)150 899
y Fh(Next)c(to)h(the)f(primary)i(key\(s\),)e(additional)h(object)h(pr)n
(operties)d(can)j(be)f(translated)g(to)f(individual)150
1012 y(columns.)291 1125 y(A)31 b(stable)h(ORM)g(should)e(make)h(use)g
(of)g(the)g Fd(type)i(constraint)g Fh(of)f(the)e(attribute)h(to)g
(choose)f(a)150 1238 y(database)j(type)e(to)i(map)g(to.)58
b(Any)33 b(attributes)f(that)g(do)h(not)f(have)h(a)h(type)d(constraint)
i(de\002ned)150 1350 y(at)27 b(all)i(ar)n(e)f(fair)g(game)f(for)h
(storing)e(using)g(a)i(pr)n(oprietary)e(storage)g(mechanism,)i(similar)
h(to)e(that)150 1463 y(employed)e(by)i Fc(Tangram::Type::D)o(um)o(p:)o
(:A)o(ny)p Fh(.)35 b(Such)27 b(a)h(schema)f(can)h(not)e(be)h(called)h
(`nor)n(-)150 1576 y(malised')23 b(and)g(will)h(not)e(be)g(stable.)291
1689 y(W)-5 b(ith)23 b(a)f(rich)i(enough)c(r)n(epr)n(esentation)h(of)h
(type)f(constraints,)h(and)g(enough)f(use)g(of)i(type)d(con-)150
1802 y(straints)33 b(thr)n(ough)f(the)h(pr)n(ogram,)i(it)f(should)e(be)
i(possible)f(to)f(map)i(to)f(all)i(common)f(database)150
1915 y(column)25 b(types.)33 b(This)24 b(is)h(usually)g(mor)n(e)g(dif)n
(\002cult)h(if)f(the)f(constraints)g(ar)n(e)i(r)n(epr)n(esented)c(as)i
Fc(Code)150 2028 y Fh(objects,)e(in)h(the)f(absence)g(of)h(LISP-style)d
(macr)n(o-manipulation)25 b(of)e(the)f(compiled)g(opcode)f(tr)n(ee.)291
2141 y(Using)c Fc(Moose)p Fh(,)f(you)g(can)j(pr)n(ovide)e(objects)g(to)
f(the)h Fc(where)e Fh(clause,)k(instead)e(of)g(the)g(code)f(block)150
2254 y(r)n(ecommended)25 b(by)h(the)g(Perl)g(6)h(speci\002cation.)40
b(This)26 b(sort)f(of)i(practice)g(should)e(be)i(encouraged;)150
2367 y(using)17 b(Perl)g(code)g(blocks)g(for)h(constraints)e(pr)n
(esents)f(a)j(formidable)h(task)d(for)i(an)g(ORMs)f(to)g(r)n(everse)150
2480 y(engineer)-7 b(.)291 2592 y(Simple)33 b(enough)f(types)f(may)i
(have)h(dir)n(ectly)e(corr)n(esponding)f(database)j(types;)h(date)e
(and)150 2705 y(time)23 b(types)d(ar)n(e)j(examples)f(of)h(this.)150
2960 y Fa(2.3)99 b(Inheritance)24 b(and)h(Roles)150 3137
y Fh(Inheritance)c(can)i(be)f(modelled)f(as)h(tables)g(that)g(shar)n(e)
g(a)h(unique,)e(primary)h(key)-10 b(.)27 b(The)21 b(objects)g(ar)n(e)
150 3250 y(the)h(same;)g(each)h(table)g(de\002nes)e(which)i(attributes)
f(the)g(extra)g(subclasses)g(add.)291 3363 y(It)h(should)f(be)i
(possible,)e(based)h(on)g(the)g(combination)h(of)g(tables)f(in)h(which)
g(the)e(primary)i(key)150 3476 y(exists,)k(to)f(determine)f(the)h(type)
f(of)i(the)f(combined)h(object.)43 b(If)28 b(this)g(is)f(not)h
(possible)f(due)f(to)i(the)150 3589 y(table)c(types)d(being)j(the)e
(same,)h(a)h Fd(surr)n(ogate)j(type)e(identi\002er)g
Fh(must)e(be)g(used.)29 b Fc(Tangram)21 b Fh(does)g(this,)150
3702 y(but)h(indiscriminately)-10 b(.)291 3814 y(When)25
b(r)n(etrieving)f(or)h(building)h(queries)e(of)h(objects)f(based)h(on)g
(a)g(base)g(type,)f(you)g(must)h(use)150 3927 y Fd(polymorphic)32
b(r)n(etrieval)p Fh(.)51 b(In)28 b(a)i(query)-10 b(,)29
b(an)g Fc(outer)53 b(join)27 b Fh(is)i(performed)e(based)i(on)f(the)g
(primary)150 4040 y(key)i(to)h(combine)h(the)f(various)g(tables)h
(sharing)f(an)h Fc(isa)e Fh(r)n(elationship.)54 b(This)31
b(is)h(called)g Fd(\002lter)n(ed)150 4153 y(mapping)20
b Fh(by)f(T)-8 b(angram)19 b(in)g(the)f(documentation)g(\002le)h
Fc(Tangram::Relati)o(on)o(al)o(::M)o(ap)o(pi)o(ng)o(s)p
Fh(.)291 4266 y(The)f(alternative)g(layout)g(\(and,)h(per)n(haps,)f
(corr)n(ectly)g(normalised\))g(is)g(to)g(use)f(wide)h(tables)g(and)150
4379 y Fc(NULL)23 b Fh(columns,)h(which)h(is)f(called)i
Fd(horizontal)h(mapping)p Fh(.)34 b(Horizontal)25 b(mapping)f(is)g
(essential)g(for)150 4492 y(databases)g(like)g(MySQL)f(\(which)i(r)n
(eturns)e(bizarr)n(e)j(r)n(esults)d(as)h(soon)f(as)h(you)f(start)g
(using)h(nested)150 4605 y(joins\),)f(or)f(SQLite)g(\(which)h(r)n
(efuses)f(to)g(answer)g(such)g(complex)g(queries\).)291
4718 y(Roles)16 b(pr)n(esent)g(a)h(similar)i(situation;)g(their)d
(storage)g(r)n(equir)n(es)g(an)i(extra)f(collection)h(of)f(columns)150
4831 y(per)n(-object.)63 b(Because)34 b(ther)n(e)g(is)h(no)f(unique)g
(r)n(elating)h(element)f(between)f(their)h(columns,)k(the)150
4944 y(columns)31 b(should)g(instead)f(be)i(attached)f(to)f(the)h
(table)h(that)f(holds)f(the)h(class)g(they)f(wer)n(e)h(com-)150
5056 y(posed)21 b(into.)291 5169 y(In)32 b(principle,)i(this)e(could)g
(work)f(by)g(including)i(a)f(single)g(column)g(in)h(each)f(of)g(the)f
(classes)150 5282 y(that)f(the)f(r)n(ole)h(is)g(composed)e(into,)k
(that)d(r)n(elates)h(to)f(a)i(surr)n(ogate)d(ID)i(ar)n(ound)g(the)f
(collection)i(of)150 5395 y(r)n(ole)19 b(attributes.)26
b(However)-7 b(,)19 b(most)f(databases)h(will)i(not)d(be)h(able)i(to)d
(enfor)n(ce)h(r)n(efer)n(ential)h(integrity)150 5508
y(with)j(a)g(constraint)f(in)h(this)f(case,)h(so)f(it)g(should)g(be)h
(avoided.)1858 5915 y(5)p eop end
%%Page: 6 6
TeXDict begin 6 5 bop 150 241 a Fj(3)119 b(Mapping)30
b(Relationships)150 452 y Fh(So)h(far)-7 b(,)35 b(I)d(have)g(only)f
(discussed)f(the)h(points)g(that)g(most)g(people)f(seem)h(to)g(agr)n
(ee)g(upon;)36 b(some)150 565 y(r)n(ough)h(equivalent)i(of)f(matching)h
(up)e(classes)h(with)g(tables,)k(and)c(attributes)f(with)h(columns.)150
678 y(However)23 b(I)h(have)h(only)e(dealt)h(with)h(mundane)f
(associations;)g(those)f(of)h(individual)i(objects)e(be-)150
791 y(tween)d(their)h(pr)n(operties.)k(What)d(about)f(r)n(efer)n(ences)
g(between)f Fd(complex)j Fh(objects?)150 1044 y Fa(3.1)99
b(Many-to-One)25 b(as)g(\(Local\))h(Foreign)g(Key)150
1220 y Fh(The)d(humble)h(r)n(efer)n(ence)g(is)f(the)h(simplest)f
(example)g(of)h(an)g(object)g(pr)n(operty)-10 b(.)29
b(A)24 b(r)n(efer)n(ence)f(in)i(the)150 1333 y(meta-model)d(is)h(much)g
(like)g(a)1234 1349 y Fc(*)1311 1333 y Fh(\(whatever\))g(to)f(one)g
(\(or)g(zer)n(o\))h Fd(r)n(elation)p Fh(.)291 1446 y
Fd(Lazy)32 b(loading)g Fh(can)g(be)e(used)f(to)h(allow)i(attributes)e
(that)g(ar)n(e)h(r)n(efer)n(ences)f(to)g(other)f(classes)h(to)150
1559 y(be)23 b(implemented)f(by)h(placing)g(a)h(for)n(eign)f(key)e
(column)j(\(or)f(columns\))g(in)g(the)f(sour)n(ce)h(table,)g(and)150
1672 y(deferring)j(the)g(actual)i Fc(select)c Fh(until)j(as)g(late)g
(as)g(possible.)40 b(Developed)25 b(mapping)i(layers)f(will)150
1785 y(also)d(support)d Fd(pr)n(e-fetching)27 b Fh(to)22
b(avoid)h(excessive)e(and)i(inef)n(\002cient)g(database)g(r)n
(ound-trips.)150 2037 y Fa(3.2)99 b(Many-to-Many)25 b(as)g(Link)g(T)-11
b(able)150 2214 y Fh(Collections)38 b(with)f(a)h(higher)f
Fd(destination)j(n-ity)f Fh(than)e(1)i(\(eg,)h(a)e Fc(Hash)e
Fh(or)h Fc(Array)p Fh(\))f(should)h(be)150 2327 y(mapped)c(to)g(a)i
(link)f(table)g(-)g(unless)f(it)h(can)h(be)e(pr)n(oven)h(that)f(they)g
(ar)n(e)h(the)f(r)n(everse)f(of)i(a)h(r)n(ela-)150 2440
y(tionship)24 b(with)g(a)i(destination)d(n-ity)i(not)f(exceeding)f(1)i
(\(see)e(below\).)34 b(The)24 b(link)h(table)h(must)e(also)150
2553 y(have)30 b(a)g Fd(category)j Fh(\(r)n(epr)n(esented)27
b(as)i(an)h(extra)g(column,)h(a)g(part)e(of)h(a)g(unique)f(key\))g(to)g
(r)n(epr)n(esent)150 2666 y(either)22 b(the)g(or)n(der)g(of)h(items)f
(in)h(a)h(collection)f(\(an)h Fc(INTEGER)19 b Fh(column\),)24
b(or)e(the)g(hash)h(key)f(\(a)h Fc(TEXT)150 2779 y Fh(or)31
b(similar\).)55 b(The)30 b Fc(Set)g Fh(class)h(sits)f(alongside)h
Fc(Array)d Fh(and)j Fc(Hash)f Fh(an)h(an)h(uncategorised)d(r)n(ela-)150
2892 y(tionship)c(\(no)h(extra)f(column\),)i(and)f(an)g(or)n(der)n(ed)f
(hash)g(\(such)h(as)g(the)f Fc(Tie::IxHash)c Fh(module\))150
3005 y(is)i(one)f(with)g(both)g(an)h(integer)f(and)g(a)h(string)f
(category)-10 b(.)150 3257 y Fa(3.3)99 b(Relations)26
b(and)e(Parametric)g(Roles)150 3434 y Fc(Array)h Fh(and)i
Fc(Hash)e Fh(seem)h(to)h(have)g(common)g(characteristics)h(-)f(ar)n(e)h
(they)e(r)n(eally)h(separate)f(fun-)150 3547 y(damental)d(types)e
(deserving)g(special)i(tr)n(eatment?)291 3660 y(Perl)j(6)h(de\002nes)d
(a)j(very)f(useful)g(featur)n(e)g(that)g(I)g(will)h(use)e(to)h
(demonstrate)e(uni\002cation)j(of)f(its)150 3773 y(collection)d(types;)
e Fd(parametric)k(r)n(oles)p Fh(.)291 3886 y(The)g(following)h(listing)
g(shows)e(a)i(selection)f(of)g(`cor)n(e')h(Perl)g(6)g(types,)e(along)i
(with)f(their)h(pos-)150 3999 y(sible)h(foundation)g(in)g(a)h(single)f
(r)n(oot)f Fc(Collection)c Fh(type,)27 b(which)g(can)h(be)f(mapped)f
(dir)n(ectly)h(to)150 4112 y(a)i(table)f(\(as)g(with)g(the)f(basic)i
(types)d(of)i(objects)g(dealt)f(with)h(earlier\).)45
b(This)27 b(is)h(an)h(abstraction;)i(it)150 4224 y(matters)22
b(not)g(that)g(the)g(actual)i(interpr)n(eter)c(does)h(not)h(use)g
(these)f(de\002nitions.)108 4424 y Fk(1)136 b Fc(role)53
b(Collection[\\$ty)o(pe)o(s])48 b({)108 4537 y Fk(2)409
b Fc(has)53 b(Seq[of)f(=>)i($types])d(@.members;)108
4650 y Fk(3)136 b Fc(})108 4762 y Fk(4)108 4875 y(5)g
Fc(role)53 b(Set[::T)e(=)k(Item])d(does)h(Collection[T])48
b(where)k({)108 4988 y Fk(6)355 b Fc(all\(.members\))48
b(===)53 b(one\(.members\);)108 5101 y Fk(7)136 b Fc(};)108
5214 y Fk(8)108 5327 y(9)g Fc(role)53 b(Pair[::K)e(=)j(Item,)e(::V)i(=)
g(Item])e(does)h(Seq[of)e(=>)j(:\(K,V\)])d({)67 5440
y Fk(10)354 b Fc(method)51 b(key)j(of)f(K)h({)g(.[0])f(})67
5553 y Fk(11)354 b Fc(method)51 b(value)i(of)g(V)h({)g(.[1])f(})67
5666 y Fk(12)135 b Fc(};)1858 5915 y Fh(6)p eop end
%%Page: 7 7
TeXDict begin 7 6 bop 67 241 a Fk(13)67 354 y(14)135
b Fc(role)53 b(Mapping[::K)d(=)k(Item,)e(::V)h(=)h(Item])f(does)f
(Collection[Pair)o([K,)o(V])o(])c({)67 467 y Fk(15)354
b Fc(all\(.members\).)o(do)o(es)o(\(P)o(air)o(\))48 b(and)67
580 y Fk(16)354 b Fc(all\(.members\).)o(ke)o(y)48 b(===)54
b(one\(.members\).)o(ke)o(y;)67 693 y Fk(17)135 b Fc(})67
806 y Fk(18)67 919 y(19)g Fc(role)53 b(Hash[Str)e(::K,)i(::V)g(=)h
(Item])e(does)h(Mapping[K,)d(V])67 1032 y Fk(20)354 b
Fc(where)52 b({)i(all\(.members\).k)o(ey)48 b(==)53 b
(one\(.members\).ke)o(y)48 b(})67 1145 y Fk(21)135 b
Fc({)67 1258 y Fk(22)354 b Fc(method)51 b(post_circumfix:<)o({)d(}>)54
b(\(K)f($key\))g(of)g(V|Undefined)d({)67 1370 y Fk(23)572
b Fc(my)53 b($seq)g(=)h(first)e({)j(.key)d(==)i($key)f(})h(&.members;)
67 1483 y Fk(24)572 b Fc($seq)52 b(??)i($seq.value)c(::)k(undef;)67
1596 y Fk(25)354 b Fc(})67 1709 y Fk(26)135 b Fc(})67
1822 y Fk(27)67 1935 y(28)g Fc(role)53 b(ArrayItem[::V)c(=)54
b(Item])e(does)h(Seq[of)f(=>)h(:\(Int,)f(V\)])h({)67
2048 y Fk(29)354 b Fc(method)51 b(index)i(of)g(Int)g({)i(.[0])d(})67
2161 y Fk(30)354 b Fc(method)51 b(value)i(of)g(Item)g({)h(.[1])f(})67
2274 y Fk(31)135 b Fc(};)67 2387 y Fk(32)67 2500 y(33)g
Fc(role)53 b(Array)f(of)i(Collection[Arra)o(yI)o(te)o(m])67
2612 y Fk(34)354 b Fc(where)52 b({)i(all\(.members\).i)o(nd)o(ex)48
b(==)53 b(one\(.members\).in)o(de)o(x)48 b(})67 2725
y Fk(35)135 b Fc({)67 2838 y Fk(36)354 b Fc(method)51
b(post_circumfix:<)o([)d(]>)54 b(\(Int)f($index\))e(of)j(Item)e({)67
2951 y Fk(37)572 b Fc(my)53 b($seq)g(=)h(first)e({)j(.index)c(==)j
($index)e(})i(&.members;)67 3064 y Fk(38)572 b Fc($seq)52
b(??)i($seq.value)c(::)k(undef;)67 3177 y Fk(39)354 b
Fc(})67 3290 y Fk(40)135 b Fc(})291 3502 y Fh(The)27
b(Hash-like)g(and)g(Array-like)g(methods)f(such)g(as)i
Fc(post)p 2440 3502 28 4 v 31 w(circumfix:)3016 3518
y(*)3093 3502 y Fh(\(lines)f(22)i(and)150 3615 y(36\))22
b(ar)n(e)f(de\002ned)e(in)i(the)f(appr)n(opriate)g(r)n(oles.)26
b(This)21 b(is)f(how)h(they)e(can)i(appear)g(to)f(be)g(dif)n(fer)n
(ent,)h(yet)150 3728 y(shar)n(e)h(a)i(common)e(r)n(ole.)150
3983 y Fa(3.4)99 b(One-to-Many)25 b(as)g(\(Remote\))g(Foreign)h(Key)150
4160 y Fh(Y)-8 b(ou)26 b(can)i(look)f(at)g(any)h(r)n(elationship)f(fr)n
(om)h(both)e(dir)n(ections.)42 b(Is)26 b(that)h(a)h(person)e(dr)n
(eaming)h(of)g(a)150 4273 y(butter\003y)-10 b(,)19 b(or)h(a)h
(butter\003y)e(being)i(dr)n(eamed)e(about)i(by)f(a)h(person?)26
b(The)20 b(only)g(dif)n(fer)n(ence)g(between)150 4386
y(the)i(one-to-many)g(database)h(r)n(epr)n(esentation)e(and)i(the)f
(many-to-one)g(ar)n(e)h(that)f(the)g(for)n(eign)h(key)150
4499 y(is)g(either)e Fd(local)j Fh(\(yeilding)f(many-to-one\))f(or)g
Fd(r)n(emote)j Fh(\(yeilding)d(one-to-many\).)291 4612
y(The)j(dif)n(\002culty)i(with)e(mapping)h(r)n(elationships)g(to)f(a)h
(r)n(emote)f(for)n(eign)h(key)e(is)i(knowing)f(that)150
4724 y(it)i(has)g(a)g Fd(sour)n(ce)h(n-ity)g Fh(of)f(1)g(in)g(the)f
(\002rst)g(place)i(-)f(you)f(need)f(to)h(\002nd)g(a)i(corr)n
(esponding,)d(r)n(eversed)150 4837 y(collection)k(on)f(the)g(tar)n(get)
f(class)i(with)f(a)h Fd(destination)i(n-ity)e Fh(of)f(1.)46
b(For)28 b(instance,)h(they)e(may)i(be)f(a)150 4950 y(simple)g
(attribute)g(and)g(not)g(a)h(collection,)g(which)g(looks)e(enough)g
(like)h(a)h Fc(Collection)24 b Fh(with)k(a)150 5063 y
Fc(subset)20 b Fh(constraint)i(limiting)i(the)e(number)g(of)h(items)f
(to)g(1)h(for)g(us)f(to)g(tr)n(eat)g(it)h(like)g(that)f(for)h(now)-8
b(.)291 5176 y(In)33 b(the)f Fc(Class::Tangram)27 b Fh(documentation,)
34 b(these)d(corr)n(esponding,)i(r)n(eversed)f(pairs)h(of)150
5289 y(collections)d(ar)n(e)g(r)n(eferr)n(ed)f(to)g(as)h
Fc(companion)25 b Fh(attributes.)49 b(This)29 b(companion)h(natur)n(e)g
(must)f(be)150 5402 y(speci\002cally)i(annotated;)i(without)d(help,)i
(ther)n(e)d(is)i(no)f(way)g(to)g(tell)h(that)f(a)h(r)n(elationship)g
(going)150 5515 y(back)36 b(`the)g(other)e(way')i(to)f(the)g(one)g(you)
f(ar)n(e)j(looking)e(at)g(is)h(a)g(corr)n(esponding)e(r)n(everse)h(r)n
(ela-)150 5628 y(tionship.)42 b(Such)27 b(featur)n(es)g(\002t)g(under)g
(the)g(auspices)g(of)g(derived)g Fc(Container)c Fh(types)j(that)h(send)
1858 5915 y(7)p eop end
%%Page: 8 8
TeXDict begin 8 7 bop 150 241 a Fh(messages)27 b(to)h(\(ie,)i(call)h
(methods)c(on\))i(r)n(emoved)f(/)h(added)e(objects)h(in)i(the)e
(collection)h(to)f(notify)150 354 y(them)h(of)g(the)f(change)h(in)g
(state,)g(so)g(that)g(they)e(may)j(update)d(their)i(own)g(back-r)n
(efer)n(ences.)46 b(The)150 467 y Fd(r)n(efer)n(ence)24
b Fh(and)e(the)f Fd(collection)i Fh(objects)e(should)f(shar)n(e)i(a)g
(language)f(for)h(passing)e(messages)g(notify-)150 580
y(ing)25 b(each)h(other)e(of)h(changes)g(to)f(their)h(state,)g(to)f
(maintain)j(consistency)-10 b(.)34 b(This)25 b(means)g(that)g(both)150
693 y Fc(Item)c Fh(and)i Fc(Collection)18 b Fh(will)24
b(r)n(equir)n(e)e(methods)f(to)h(be)h(added.)291 806
y(This)i(situation)g(is)g(not)f(r)n(eally)i(so)f(dir)n(e,)g(an)g
(alternative)h(is)f(to)g(ensur)n(e)e(that)i(a)h(given)f(pr)n(ogram)150
919 y(always)36 b(accesses)f(r)n(elationships)g(between)f(types)g(in)i
(one)e(dir)n(ection.)67 b(This)36 b(is)f(simpler)-7 b(,)39
b(usu-)150 1032 y(ally)27 b(faster)-7 b(,)26 b(and)g(doesn't)d(limit)28
b(your)c(ability)j(to)f(use)e(the)h(r)n(elationships)h(in)g(queries.)36
b Fc(Tangram)150 1145 y Fh(demonstrated)18 b(this)j(by)g(adding)f(r)n
(ead-only)-10 b(,)21 b(demand)f(loaded)h Fd(back-r)n(efer)n(ences)k
Fh(on)c(one-to-many)150 1258 y(r)n(elationships)28 b(\(see)g(the)g
(documentation)f(for)i Fc(Tangram::Type::)o(Se)o(t:)o(:Fr)o(om)o(On)o
(e)p Fh(,)24 b(partic-)150 1370 y(ularly)30 b(the)e Fc(back)f
Fh(pr)n(operty\).)44 b(One)29 b(they)f(can)h(be)g(changed,)h(or)e
(their)h(values)g(may)g(be)g(cached,)150 1483 y(the)22
b('companion')h(system)e(of)i(message)e(passing)h(becomes)g(necessary)
-10 b(.)291 1596 y(Fr)n(om)27 b(this)f(vantagepoint,)h(it)g(appears)g
(that)f(typed)f(collection)i(r)n(oles)g(may)g(pr)n(ovide)g(a)g(solid)
150 1709 y(foundation)17 b(for)g(a)g(stable)h(mapping)f(between)e(the)i
(Perl)g(6)g(meta-model)g(and)h(a)f(r)n(elational)i(database.)150
2121 y Fj(4)119 b(Query)30 b(Expressions)150 2332 y Fh(Query)h(expr)n
(essions)d(ar)n(e)k(a)g(dif)n(\002cult)g(issue.)53 b(Nobody)29
b(seems)h(to)h(want)g(to)g(write)f(SQL)h(for)g(ev-)150
2445 y(erything,)24 b(but)h(people)f(still)i(want)f(the)f(full)j(power)
d(of)h(SQL)g(available)j(to)d(them.)35 b(Why)24 b(is)i(it)f(that)150
2558 y(most)g(database)h(abstractions)g(leave)g(wide)g(gaping)f
(sections)g(of)h(SQL)f(unable)i(to)e(be)h(generated)150
2670 y(without)c(cumbersome)g(manual)i(SQL)e(fragments?)150
2925 y Fa(4.1)99 b(Junctions)26 b(for)e(remote)h(objects)150
3102 y Fh(In)30 b(T)-8 b(angram,)32 b(one)e(uses)f(the)g
Fc(Tangram::Storag)o(e-)o(>r)o(emo)o(te)24 b Fh(method)29
b(to)g(r)n(eturn)h(a)h Fd(r)n(emote)150 3215 y(object)p
Fh(;)d(this)e(object)f(r)n(epr)n(esents)f Fd(an)h(object)i(in)f(the)h
(database)p Fh(.)40 b(In)25 b(a)h(sense,)f(it)h(is)f(an)h
Fd(abjunction)h Fh(of)e(all)150 3328 y(of)e(the)e(r)n(ows)h(in)i(the)d
(database.)28 b(It)22 b(r)n(epr)n(esents)e(exactly)j(one)f(object)g(at)
h(a)g(time.)291 3441 y(Similarly)-10 b(,)27 b(the)d Fc(DBIx::Class::Re)
o(su)o(ltS)o(et)18 b Fh(object)25 b(r)n(epr)n(esents)d(a)k
Fd(conjunction)e Fh(of)h(all)i(of)150 3554 y(the)22 b(r)n(ows)g(in)h(a)
g(table)g(\(or)g(whatever)f(the)f(r)n(esult)h(set)g(r)n(efers)g(to\).)
291 3667 y(These)f(basic)i(abstractions)f(ar)n(e)g(powerful)f(tools,)g
(pr)n(oviding)h(the)f(basic)i(constr)o(ucts)e(used)g(for)150
3780 y(all)33 b(SQL)f(expr)n(essions:)45 b(table)32 b(aliases.)57
b(Relational)32 b(featur)n(es)g(such)f(as)h(aggr)n(egates,)h(joins,)h
(and)150 3892 y(subqueries)g(may)i(all)h(be)f(expr)n(essed)c(cleanly)37
b(and)e(expr)n(essively)f(using)h(this)h(abstraction,)j(as)150
4005 y(demonstrated)20 b(by)i(the)g(range)g(of)h(queries)e(in)j(the)d
Fc(Tangram)f Fh(test)h(suite.)150 4260 y Fa(4.2)99 b(Logical)26
b(Operations)f(on)g(Junctions)h(are)e(still)i(Junctions)150
4437 y Fh(When)i(you)g(perform)g(logical)j(operations)c(such)i(as)g
(booleans)f(on)g(junctions,)i(a)g(junction)f(is)g(r)n(e-)150
4550 y(turned.)35 b(Analogously)-10 b(,)25 b(the)g(r)n(esult)g(of)h
(using)f(boolean)g(operations)f(or)i(equality)f(on)h(a)g(database)150
4663 y(r)n(esult)c(set)f(object)i(is)g(a)g(junction)g(which)g(r)n(epr)n
(esents)d(the)i(solution)g(to)g(the)f(pr)n(oblem)i(given.)291
4776 y(Result)h(set)g(abjunctions)h(have)g(slightly)g(dif)n(fer)n(ent)g
(pr)n(operties)e(to)h(r)n(egular)h(Perl)g(6)g(junctions.)150
4889 y(For)32 b(instance,)j(a)f(table)f(alias)i(appearing)d(multiple)i
(times)e(in)i(a)f(query)f(must)g(always)i(r)n(efer)e(to)150
5002 y(a)g(single)g(value)h(at)f(a)g(particular)h(instant.)56
b(The)31 b(similarity)i(is)f(drawn)g(her)n(e)f(not)g(because)h(they)150
5114 y(should)17 b(be)g(implemented)g(using)g(junctions,)h(but)g
(because)f(they)f(ar)n(e)i(conceptually)g(very)f(similar)-7
b(.)150 5369 y Fa(4.3)99 b(Running)25 b(the)g(queries)f(-)h(evaluating)
h(the)f(Junctions)150 5546 y Fh(Passing)c(a)h(set)f(of)g(query)g(expr)n
(essions)e(to)i(a)h(database)g(handle,)f(and)h(asking)f(for)g(an)h
(iterator)f(over)150 5659 y(the)h(members)g(of)h(the)e(set,)h(is)g(the)
g(point)g(wher)n(e)g(the)g(query)f(is)i(r)o(un.)1858
5915 y(8)p eop end
%%Page: 9 9
TeXDict begin 9 8 bop 291 241 a Fh(In)17 b Fc(Tangram)p
Fh(,)e(this)i(happens)f(when)g(you)g(pass)h(the)f Fc(Tangram::Expr)11
b Fh(and)18 b Fc(Tangram::Expr:)o(:F)o(il)o(ter)150 354
y Fh(objects)f(you)g(constr)o(uct)h(via)h Fc(Tangram::Storag)o(e-)o(>r)
o(emo)o(te)o(\(\))11 b Fh(r)n(eturned)17 b(objects)g(to)g(a)i(func-)150
467 y(tion)e(such)g(as)g Fc(Tangram::Storag)o(e->)o(se)o(le)o(ct)o
(\(\))11 b Fh(or)17 b Fc(Tangram::Stora)o(ge)o(->c)o(ur)o(so)o(r\()o
(\))p Fh(.)291 580 y(In)25 b Fc(DBIx::Class)p Fh(,)20
b(this)k(happens)g(when)g(you)f(call)k(a)e(method)f(r)n(eturning)g(an)h
(iterator)f(on)g(a)150 693 y Fc(DBIx::Class::Re)o(su)o(lt)o(Se)o(t)17
b Fh(object.)150 992 y Fj(5)119 b(Conclusion)150 1203
y Fh(The)26 b(dif)n(fer)n(ences)h(between)e(Object-Oriented)i(Pr)n
(ogramming)h(and)f(Relational)h(Logic)e(ar)n(e)i(sub-)150
1316 y(stantial,)19 b(and)f(r)n(equir)n(e)g(a)h(developed)d
(understanding)g(in)i(or)n(der)f(to)h(design)f(an)h(Object-Relational)
150 1428 y(Mapper)33 b(that)h(does)e(not)h(make)h(excessive)e(design)h
(mistakes,)i(undermining)e(the)g(bene\002ts)g(of)150
1541 y(Set)26 b(Theory)f(and)i(the)g(Relational)h(Database)f(model.)41
b(However)-7 b(,)27 b(the)f(key)g(point)g(is)h(that)g(all)i(the)150
1654 y(fundamental)e(r)n(elational)h(concepts)e(can)h(be)g(mapped)f(to)
g(an)h(object)f(meta-model,)h(and)g(r)n(ound-)150 1767
y(tripping)20 b(fr)n(om)h(any)f(DDL)h(to)f(a)h(Perl)g(6)g(meta-model)f
(and)h(back)g(again)h(without)d(loss)h(of)g(informa-)150
1880 y(tion)h(should)e(be)i(possible.)27 b(I)20 b(hope)g(that)g(this)h
(paper)f(can)i(serve)d(as)i(a)h(starting)e(blueprint)g(for)h(such)150
1993 y(developments.)150 2191 y(Finally)-10 b(,)27 b(it)f(has)f(come)h
(to)f(the)g(point)g(wher)n(e)g(such)g(concepts)f(can)j(be)e(expr)n
(essed)e(in)j(terms)f(of)h(the)150 2304 y(tools)f(that)h(gr)n(ew)f(fr)n
(om)i(both)e(the)h(pur)n(e)f(Relational)i(and)f(pur)n(e)f(Object)i
(Oriented)e(back-gr)n(ound.)150 2417 y(Both)j(Jean-Louis)g(Ler)n(oy's)f
(fantastic)j Fc(Tangram)c Fh(module)i(\(my)h(own)g(additions)f(-)h
(`companion)150 2530 y(attributes')h(aside,)i(generally)e(aided)h(the)e
(push)h(away)h(fr)n(om)g(normalisation)h(principles\),)h(and)150
2643 y(Matt)26 b(S.)f(T)-8 b(r)n(out's)25 b(\(and)h(the)f
(community's\))h Fc(DBIx::Class)20 b Fh(have)27 b(the)e(necessary)f
(abstractions)150 2756 y(to)e(make)h(this)f(kind)g(of)h(comparison)f
(possible.)150 3054 y Fj(References)195 3265 y Fh([1])47
b(Ler)n(oy)-10 b(,)21 b Fd(T)-10 b(angram)23 b(-)g(Mapping)h
(Inheritance)p Fh(.)347 3416 y Fc(http://tangram.)o(ut)o(sl)o(.g)o(en)o
(.nz)o(/d)o(oc)o(s/)o(Ta)o(ngr)o(am)o(/R)o(el)o(at)o(ion)o(al)o(/M)o
(ap)o(pi)o(ngs)o(.h)o(tm)o(l)195 3603 y Fh([2])47 b(T)-8
b(r)n(out,)21 b Fd(DBIx::Class::Manual::Example)i(-)g(Simple)h(CD)e
(database)j(example)p Fh(,)347 3754 y Fc(http://search.c)o(pa)o(n.)o
(or)o(g/)o(dis)o(t/)o(DB)o(Ix)o(-C)o(las)o(s/)o(li)o(b/)o(DB)o(Ix/)o
(Cl)o(as)o(s/)o(Ma)o(nua)o(l/)o(Ex)o(am)o(pl)o(e.p)o(od)195
3941 y Fh([3])47 b(Conway)31 b(and)g(W)-8 b(all,)35 b
Fd(Perl)c(6)h(Synopsis)h(6)f(-)g(Subr)n(outines)p Fh(.)f(In)g
(particular)i(the)d(r)n(efer)n(ences)g(to)347 4054 y
Fc(.WHICH)20 b Fh(in)j(the)f(de\002nition)g(of)g(value)i(types.)347
4204 y Fc(http://dev.perl)o(.o)o(rg)o(/p)o(er)o(l6/)o(do)o(c/)o(de)o
(si)o(gn/)o(sy)o(n/)o(S0)o(6.)o(htm)o(l#)o(Im)o(mu)o(ta)o(ble)p
3576 4204 28 4 v 26 w(types)195 4392 y Fh([4])47 b(Larry)19
b(W)-8 b(all,)22 b Fd(Perl)e(6)h(Synopsis)h(12)f(-)f(Objects)p
Fh(.)h(In)f(particular)h(the)e(sections)g(on)h(Roles)f(and)h(their)347
4505 y(parameters)347 4655 y Fc(http://dev.perl)o(.o)o(rg)o(/p)o(er)o
(l6/)o(do)o(c/)o(de)o(si)o(gn/)o(sy)o(n/)o(S1)o(2.)o(htm)o(l#)o(Ro)o
(le)o(s)1858 5915 y Fh(9)p eop end
%%Trailer

userdict /end-hook known{end-hook}if
%%EOF
