


<html>
  <head>
    <title>Tangram Orthogonal Persistence: POD: Tangram::Expr - represent expressions on database server side</title>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <link type="text/css" rel="stylesheet" href="./tangram.css">
	<style type="text/css" language="css"><!--
		#sitelogo {
			background-image: url('./gfx/bgdots.png');
			background-repeat: repeat-both;
		}
	--></style>
	<script language="javascript" type="text/javascript"><!--
		var clearedalready = 0;
	--></script>
  </head>

  <body onload="document.getElementById('search').value = 'Site/List Search'">
<form>
    <div id="sitelogo">
	<a href="./">
	  <img id="t2logo" src="./gfx/t2.png" border="0" />
	  <img id="tangramlogo" src="./gfx/tangramlogo.png" border="0" />
	</a>
    </div>
    <div id="navbar">
<div class="menuItem right">
	<input id="search" type="text" width="20" name="search" onfocus="if (!(clearedalready++)) {this.value = ''}"/>
	<input type="submit" value="Go!" />
</div>

<div class="menuItem">
  <a href="./index.html" class="menu">Home</a>
</div>

<div class="menuItem">
  <a href="./download/index.html" class="menu">Download</a>
</div>

<div class="menuItem">
  <a href="./docs/index.html" class="menu">Documentation</a>
</div>

<div class="menuItem">
  <a href="./development/index.html" class="menu">Development</a>
</div>

	
<div style="clear: both"></div>
</div>
</form>

<div id="body">



<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#numeric_expressions">NUMERIC EXPRESSIONS</a></li>
	<li><a href="#string_expressions">STRING EXPRESSIONS</a></li>
	<li><a href="#reference_expressions">REFERENCE EXPRESSIONS</a></li>
	<li><a href="#collection_expressions">COLLECTION EXPRESSIONS</a></li>
	<li><a href="#predicates">PREDICATES</a></li>
	<li><a href="#class_methods">CLASS METHODS</a></li>
	<ul>

		<li><a href="#new__type___expr___remotes_">new($type, $expr, @remotes)</a></li>
	</ul>

	<li><a href="#instance_methods">INSTANCE METHODS</a></li>
	<ul>

		<li><a href="#expr__"><code>expr()</code></a></li>
		<li><a href="#type__"><code>type()</code></a></li>
		<li><a href="#objects__"><code>objects()</code></a></li>
		<li><a href="#storage__"><code>storage()</code></a></li>
	</ul>

	<li><a href="#examples">EXAMPLES</a></li>
	<li><a href="#see_also">SEE ALSO</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>Tangram::Expr - represent expressions on database server side</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<pre>
   my ($r1, $r2) = $storage-&gt;remote(qw( ... ));</pre>
<pre>
   $r1-&gt;{field} operator $value
   $r1-&gt;{field} operator $r2-&gt;{field2}</pre>
<pre>
   $r1-&gt;{collection}-&gt;includes( $obj )
   $r1-&gt;{collection}-&gt;exists( $obj, $filter )
   $r1-&gt;{collection}-&gt;includes_or( $obj1, $obj2, ... )</pre>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>Tangram::Expr objects represent expressions that will be evaluated on
the database server side.</p>
<p>Expression objects fall into one of the following categories: numeric,
string, reference or collection.</p>
<p>Many of the methods in Expr are needed only by people extending
Tangram.  See also <a href="/pod/./Tangram/Relational.html">the Tangram::Relational manpage</a>, and the source the
<a href="/pod/./Tangram/mysql.html">the Tangram::mysql manpage</a> and <a href="/pod/./Tangram/Sybase.html">the Tangram::Sybase manpage</a> for examples on how these
functions are intercepted to allow RDBMS-specific expressions.</p>
<p>
</p>
<hr />
<h1><a name="numeric_expressions">NUMERIC EXPRESSIONS</a></h1>
<p>Numeric expression objects can be compared using the operators ==, !=,
&lt;, &gt;, &lt;= and &gt;=.  The other operand must be either another numeric
expression object, or a normal Perl numeric value.  The result of the
comparison is a Filter.</p>
<p>
</p>
<hr />
<h1><a name="string_expressions">STRING EXPRESSIONS</a></h1>
<p>String expression objects can be compared using the operators eq, ne,
lt, gt, le, and ge.  The other operand must be either a string
expression object or any Perl scalar value. Tangram will automatically
quote the operand as required by the SQL syntax.  The result of the
comparison is a Tangram::Filter.</p>
<p>String expression objects also support the method like($str), where
$str is a string that may contain SQL wildcards. The result is a
Tangram::Filter that translates to a SQL <code>LIKE $str</code> predicate.</p>
<p>
</p>
<hr />
<h1><a name="reference_expressions">REFERENCE EXPRESSIONS</a></h1>
<p>Reference expression objects can be compared for equality using
operators == and !=. The other operand must be another reference
expression, a persistent object or undef(). The result of the
comparison is a Filter.</p>
<p>
</p>
<hr />
<h1><a name="collection_expressions">COLLECTION EXPRESSIONS</a></h1>
<p>Collection expression objects represents a collection inside an
object. It supports the <code>includes()</code> and <code>exists()</code> methods, which returns
a Tangram::Filter stating that the collection must contain the
operand. <code>exists()</code> uses a subselect.</p>
<p>It also supports the <code>includes_or()</code> methods, which accepts a list and
is performs a logical OR - using the IN (x,y,z) SQL construct.</p>
<p>The operand may be a Tangram::Remote, a persistent object,
or an object ID.</p>
<p>operator &lt; is provided as a synonym for includes().</p>
<p>The <code>includes()</code> method can be used for all collection types (Set,
Array, Hash, and the Intr* versions).</p>
<p>
</p>
<hr />
<h1><a name="predicates">PREDICATES</a></h1>
<p>Predicate objects represent logical expressions, or
conditions. Predicates support logical operators &amp;, | and !. Note that
a <em>single</em> ampersand or vertical bar must be used (this is a Perl
limitation).  The result is another predicate.</p>
<p>
</p>
<hr />
<h1><a name="class_methods">CLASS METHODS</a></h1>
<p>
</p>
<h2><a name="new__type___expr___remotes_">new($type, $expr, @remotes)</a></h2>
<p>Returns a new instance.</p>
<p>$type is a Type object corresponding to this expression (see
<a href="/pod/./Tangram/Type.html">the Tangram::Type manpage</a>).</p>
<p>$expr is a SQL expression. It will eventually become part of a
WHERE-CLAUSE.</p>
<p>@remotes contains the Remote objects (see <a href="/pod/./Tangram/Remote.html">the Tangram::Remote manpage</a>) that
participate in the expression. Tangram uses this list to insert the
corresponding tables in the FROM clause and conditions in the
WHERE-CLAUSE.</p>
<p>
</p>
<hr />
<h1><a name="instance_methods">INSTANCE METHODS</a></h1>
<p>
</p>
<h2><a name="expr__"><code>expr()</code></a></h2>
<p>Returns the SQL equivalent for this expression.</p>
<p>
</p>
<h2><a name="type__"><a href="/pod/./Tangram/FlatArray.html#item_type"><code>type()</code></a></a></h2>
<p>Returns the Type (see <a href="/pod/./Tangram/Type.html">the Tangram::Type manpage</a>) corresponding  to this
expression.</p>
<p>
</p>
<h2><a name="objects__"><code>objects()</code></a></h2>
<p>Returns the list of the objects that participate in this
expression.</p>
<p>
</p>
<h2><a name="storage__"><code>storage()</code></a></h2>
<p>Returns the Storage associated with this expression.</p>
<p>
</p>
<hr />
<h1><a name="examples">EXAMPLES</a></h1>
<p>$person is called 'Homer'</p>
<pre>
      $person-&gt;{name} eq 'Homer'</pre>
<p>$person's name ends with 'mer'</p>
<pre>
      $person-&gt;{name}-&gt;like('%mer');</pre>
<p>$person is older than 35</p>
<pre>
      $person-&gt;{age} &gt; 35</pre>
<p>$person is married to $homer</p>
<pre>
      $person-&gt;{partner} == $homer</pre>
<p>$person is not $homer</p>
<pre>
      $person != $homer</pre>
<p>$person is not $homer and is older than 65</p>
<pre>
      $person != $homer &amp; $person-&gt;{age} &gt; 65</pre>
<p>$person is $bart's parent</p>
<pre>
      $person-&gt;{children}-&gt;includes( $bart )
      $person-&gt;{children} &lt; $bart</pre>
<p>$person is not $bart's parent</p>
<pre>
      !$person-&gt;{children}-&gt;includes( $bart )
      !($person-&gt;{children} &lt; $bart)</pre>
<p>$person is one of the local list of people, @person</p>
<pre>
      $person-&gt;in(@person)</pre>
<p>
</p>
<hr />
<h1><a name="see_also">SEE ALSO</a></h1>
<p><a href="/pod/./Tangram/Remote.html">the Tangram::Remote manpage</a>, <a href="/pod/./Tangram/Expr.html">the Tangram::Expr manpage</a>, <a href="/pod/./Tangram/Storage.html">the Tangram::Storage manpage</a></p>

</div>

<div id="footer">
   <hr>
   <a href="copyright.html">copyright info</a> |
   <a href="credits.html">credits</a> |
   <a href="map.html">site map</a>

</div>

  </body>
</html>

