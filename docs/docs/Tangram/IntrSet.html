


<html>
  <head>
    <title>Tangram Orthogonal Persistence: POD: Tangram::IntrSet - map Set::Object using a foreign key</title>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <link type="text/css" rel="stylesheet" href="./tangram.css">
	<style type="text/css" language="css"><!--
		#sitelogo {
			background-image: url('./gfx/bgdots.png');
			background-repeat: repeat-both;
		}
	--></style>
	<script language="javascript" type="text/javascript"><!--
		var clearedalready = 0;
	--></script>
  </head>

  <body onload="document.getElementById('search').value = 'Site/List Search'">
<form>
    <div id="sitelogo">
	<a href="./">
	  <img id="t2logo" src="./gfx/t2.png" border="0" />
	  <img id="tangramlogo" src="./gfx/tangramlogo.png" border="0" />
	</a>
    </div>
    <div id="navbar">
<div class="menuItem right">
	<input id="search" type="text" width="20" name="search" onfocus="if (!(clearedalready++)) {this.value = ''}"/>
	<input type="submit" value="Go!" />
</div>

<div class="menuItem">
  <a href="./index.html" class="menu">Home</a>
</div>

<div class="menuItem">
  <a href="./download/index.html" class="menu">Download</a>
</div>

<div class="menuItem">
  <a href="./docs/index.html" class="menu">Documentation</a>
</div>

<div class="menuItem">
  <a href="./development/index.html" class="menu">Development</a>
</div>

	
<div style="clear: both"></div>
</div>
</form>

<div id="body">



<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>Tangram::IntrSet - map Set::Object using a foreign key</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<pre>
   use Tangram;</pre>
<pre>
   # or
   use Tangram::Core;
   use Tangram::IntrSet;</pre>
<pre>
   $schema = Tangram::Schema-&gt;new(</pre>
<pre>
      classes =&gt; { Basket =&gt; { fields =&gt; {</pre>
<pre>
      iset =&gt;
      {
         # long form
         fruits =&gt;
         {
            class =&gt; 'Fruit',
            coll =&gt; 'basket',
         },</pre>
<pre>
         # or (short form)
         fruits =&gt; 'Fruit',
      }</pre>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>This class maps references to Set::Object collections in an intrusive
fashion. The persistent fields are grouped in a hash under the <code>iset</code>
key in the field hash.</p>
<p>The set may contain only objects of persistent classes. These classes
must have a common persistent base class.</p>
<p>Tangram uses a column on the element's table to store the id of the
object containing the collection.</p>
<p>CAUTION: the same object may not be an element of the same collection,
in two different objects. This mapping may be used only for
one-to-many relationships.</p>
<p>The field names are passed in a hash that associates a field name with
a field descriptor. The field descriptor may be either a hash or a
string. The hash uses the following fields:</p>
<ul>
<li><strong><a name="item_class">class</a></strong><br />
</li>
Mandatory field <a href="#item_class"><code>class</code></a> specifies the class of the elements.
<p></p>
<li><strong><a name="item_aggreg">aggreg</a></strong><br />
</li>
Optional field <a href="#item_aggreg"><code>aggreg</code></a> specifies that the elements of the collection
must be removed (erased) from persistent storage along with the
containing object. The default is not to aggregate.
<p></p>
<li><strong><a name="item_back">back</a></strong><br />
</li>
Optional field <a href="#item_back"><code>back</code></a> sets the name of a field that is inserted in
the elements. That field acts as a demand-loaded, read-only reference
to the object containing the collection.
<p></p>
<li><strong><a name="item_coll">coll</a></strong><br />
</li>
Optional field <a href="#item_coll"><code>coll</code></a> sets the name the column containing the id of
the containing object. This defaults to 'C_m', where 'C' is the class
of the containing object (after passing through the normalisation
function), and 'm' is the field name.
<p></p>
<li><strong><a name="item_deep_update">deep_update</a></strong><br />
</li>
Optional field <a href="#item_deep_update"><code>deep_update</code></a> specificies that all elements have to be
updated automatically when <code>update</code> is called on the collection
object. Automatic update ensures consisitency between the Perl
representation and the DBMS state, but degrades update performance so
use it with caution. The default is not to do automatic updates.
<p></p></ul>
<p>If the descriptor is a string, it is interpreted as the name of the
element's class. This is equivalent to specifying only the <a href="#item_class"><code>class</code></a>
field in the hash variant.</p>

</div>

<div id="footer">
   <hr>
   <a href="copyright.html">copyright info</a> |
   <a href="credits.html">credits</a> |
   <a href="map.html">site map</a>

</div>

  </body>
</html>

